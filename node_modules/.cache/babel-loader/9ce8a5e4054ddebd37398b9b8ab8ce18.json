{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C\\u043D\\u0430\\u044F\\\\ToDo-app-main\\\\src\\\\components\\\\TasksSection\\\\SearchField.tsx\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { createSearchParams, Link, useNavigate } from \"react-router-dom\";\nimport { ReactComponent as Search } from \"@svgr/webpack?-svgo,+ref!../../assets/search.svg\";\nimport useDate from \"../hooks/useDate\";\nimport useSearchQuery from \"../hooks/useSearchQuery\";\nimport useVisibility from \"../hooks/useVisibility\";\nconst ItemSearch = ({\n  task\n}) => {\n  const dateFormated = useDate(task.date);\n  return /*#__PURE__*/React.createElement(\"li\", {\n    key: task.id,\n    className: \"py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/task/${task.id}`,\n    className: \"flex justify-between transition hover:text-rose-500 dark:hover:text-slate-200\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 9\n    }\n  }, task.title), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 9\n    }\n  }, dateFormated)));\n};\nconst SearchField = () => {\n  const navigate = useNavigate();\n  const searchResultsRef = useRef(null);\n  const [searchInputValue, setSearchInputValue] = useState(\"\");\n  const matchedTasks = useSearchQuery(searchInputValue);\n  const tasks = matchedTasks.slice(0, 4);\n  const {\n    elementIsVisible: listResultsVisible,\n    showElement: showListResults,\n    closeElement: closeListResults\n  } = useVisibility([searchResultsRef.current], () => setSearchInputValue(\"\"));\n  const navigateToSearchResults = () => {\n    navigate({\n      pathname: \"results\",\n      search: createSearchParams({\n        q: searchInputValue\n      }).toString()\n    });\n  };\n  useEffect(() => {\n    if (searchInputValue.trim().length > 0) {\n      showListResults();\n    } else {\n      closeListResults();\n    }\n  }, [closeListResults, searchInputValue, showListResults]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-1 col-span-3 row-start-2 md:pr-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \" relative md:max-w-xs w-full\",\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"search\",\n    className: \"sr-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"search\",\n    id: \"search\",\n    placeholder: \"Search task\",\n    ref: searchResultsRef,\n    onKeyUp: ({\n      currentTarget\n    }) => {\n      setSearchInputValue(currentTarget.value);\n    },\n    className: \"inputStyles w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Search, {\n    className: \"absolute w-4 sm:w-5 right-4 top-3.5 text-slate-400\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }), listResultsVisible && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"absolute bg-slate-100 rounded-md w-full top-14 p-3 dark:bg-slate-800 z-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, tasks.length ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, tasks.map(task => /*#__PURE__*/React.createElement(ItemSearch, {\n    key: task.id,\n    task: task,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: navigateToSearchResults,\n    className: \"bg-rose-100 w-full p-2 rounded-md text-rose-600 dark:bg-slate-700/[.3] dark:text-slate-200\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, \"All results for \\\"\", searchInputValue, \"\\\"\")) : /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }, \"No tasks found\"))));\n};\nexport default SearchField;","map":{"version":3,"names":["React","useState","useEffect","useRef","createSearchParams","Link","useNavigate","ReactComponent","Search","useDate","useSearchQuery","useVisibility","ItemSearch","task","dateFormated","date","createElement","key","id","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","to","title","SearchField","navigate","searchResultsRef","searchInputValue","setSearchInputValue","matchedTasks","tasks","slice","elementIsVisible","listResultsVisible","showElement","showListResults","closeElement","closeListResults","current","navigateToSearchResults","pathname","search","q","toString","trim","length","autoComplete","htmlFor","type","placeholder","ref","onKeyUp","currentTarget","value","Fragment","map","onClick"],"sources":["C:/Users/Admin/Desktop/Дипломная/ToDo-app-main/src/components/TasksSection/SearchField.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { createSearchParams, Link, useNavigate } from \"react-router-dom\";\nimport { ReactComponent as Search } from \"../../assets/search.svg\";\nimport { Task } from \"../../interfaces\";\nimport useDate from \"../hooks/useDate\";\nimport useSearchQuery from \"../hooks/useSearchQuery\";\nimport useVisibility from \"../hooks/useVisibility\";\n\nconst ItemSearch: React.FC<{ task: Task }> = ({ task }) => {\n  const dateFormated = useDate(task.date);\n  return (\n    <li key={task.id} className=\"py-2\">\n      <Link\n        to={`/task/${task.id}`}\n        className=\"flex justify-between transition hover:text-rose-500 dark:hover:text-slate-200\"\n      >\n        <span>{task.title}</span>\n        <span>{dateFormated}</span>\n      </Link>\n    </li>\n  );\n};\n\nconst SearchField: React.FC = () => {\n  const navigate = useNavigate();\n\n  const searchResultsRef = useRef<HTMLInputElement>(null);\n  const [searchInputValue, setSearchInputValue] = useState<string>(\"\");\n\n  const matchedTasks = useSearchQuery(searchInputValue);\n\n  const tasks = matchedTasks.slice(0, 4);\n\n  const {\n    elementIsVisible: listResultsVisible,\n    showElement: showListResults,\n    closeElement: closeListResults,\n  } = useVisibility([searchResultsRef.current!], () => setSearchInputValue(\"\"));\n\n  const navigateToSearchResults = () => {\n    navigate({\n      pathname: \"results\",\n      search: createSearchParams({\n        q: searchInputValue,\n      }).toString(),\n    });\n  };\n\n  useEffect(() => {\n    if (searchInputValue.trim().length > 0) {\n      showListResults();\n    } else {\n      closeListResults();\n    }\n  }, [closeListResults, searchInputValue, showListResults]);\n\n  return (\n    <div className=\"flex-1 col-span-3 row-start-2 md:pr-10\">\n      <form className=\" relative md:max-w-xs w-full\" autoComplete=\"off\">\n        <label htmlFor=\"search\" className=\"sr-only\"></label>\n        <input\n          type=\"search\"\n          id=\"search\"\n          placeholder=\"Search task\"\n          ref={searchResultsRef}\n          onKeyUp={({ currentTarget }) => {\n            setSearchInputValue(currentTarget.value);\n          }}\n          className=\"inputStyles w-full\"\n        />\n        <Search className=\"absolute w-4 sm:w-5 right-4 top-3.5 text-slate-400\" />\n        {listResultsVisible && (\n          <div className=\"absolute bg-slate-100 rounded-md w-full top-14 p-3 dark:bg-slate-800 z-10\">\n            {tasks.length ? (\n              <>\n                <ul>\n                  {tasks.map((task) => (\n                    <ItemSearch key={task.id} task={task} />\n                  ))}\n                </ul>\n                <button\n                  onClick={navigateToSearchResults}\n                  className=\"bg-rose-100 w-full p-2 rounded-md text-rose-600 dark:bg-slate-700/[.3] dark:text-slate-200\"\n                >\n                  All results for \"{searchInputValue}\"\n                </button>\n              </>\n            ) : (\n              <span>No tasks found</span>\n            )}\n          </div>\n        )}\n      </form>\n    </div>\n  );\n};\n\nexport default SearchField;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}