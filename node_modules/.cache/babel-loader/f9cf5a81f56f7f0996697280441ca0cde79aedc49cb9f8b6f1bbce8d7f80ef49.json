{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C\\u043D\\u0430\\u044F\\\\ToDo-app-main\\\\src\\\\components\\\\TasksSection\\\\SearchField.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { createSearchParams, Link, useNavigate } from \"react-router-dom\";\nimport { ReactComponent as Search } from \"../../assets/search.svg\";\nimport useDate from \"../hooks/useDate\";\nimport useSearchQuery from \"../hooks/useSearchQuery\";\nimport useVisibility from \"../hooks/useVisibility\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ItemSearch = ({\n  task\n}) => {\n  _s();\n  const dateFormated = useDate(task.date);\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    className: \"py-2\",\n    children: /*#__PURE__*/_jsxDEV(Link, {\n      to: `/task/${task.id}`,\n      className: \"flex justify-between transition hover:text-rose-500 dark:hover:text-slate-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: task.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: dateFormated\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 7\n    }, this)\n  }, task.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 5\n  }, this);\n};\n_s(ItemSearch, \"kBqq2HCrzXYUW5YSJBwiXrNSX18=\", false, function () {\n  return [useDate];\n});\n_c = ItemSearch;\nconst SearchField = () => {\n  _s2();\n  const navigate = useNavigate();\n  const searchResultsRef = useRef(null);\n  const [searchInputValue, setSearchInputValue] = useState(\"\");\n  const matchedTasks = useSearchQuery(searchInputValue);\n  const tasks = matchedTasks.slice(0, 4);\n  const {\n    elementIsVisible: listResultsVisible,\n    showElement: showListResults,\n    closeElement: closeListResults\n  } = useVisibility([searchResultsRef.current], () => setSearchInputValue(\"\"));\n  const navigateToSearchResults = () => {\n    navigate({\n      pathname: \"results\",\n      search: createSearchParams({\n        q: searchInputValue\n      }).toString()\n    });\n  };\n  useEffect(() => {\n    if (searchInputValue.trim().length > 0) {\n      showListResults();\n    } else {\n      closeListResults();\n    }\n  }, [closeListResults, searchInputValue, showListResults]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex-1 col-span-3 row-start-2 md:pr-10\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \" relative md:max-w-xs w-full\",\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"search\",\n        className: \"sr-only\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"search\",\n        id: \"search\",\n        placeholder: \"Search task\",\n        ref: searchResultsRef,\n        onKeyUp: ({\n          currentTarget\n        }) => {\n          setSearchInputValue(currentTarget.value);\n        },\n        className: \"inputStyles w-full\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Search, {\n        className: \"absolute w-4 sm:w-5 right-4 top-3.5 text-slate-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), listResultsVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bg-slate-100 rounded-md w-full top-14 p-3 dark:bg-slate-800 z-10\",\n        children: tasks.length ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n            children: tasks.map(task => /*#__PURE__*/_jsxDEV(ItemSearch, {\n              task: task\n            }, task.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: navigateToSearchResults,\n            className: \"bg-rose-100 w-full p-2 rounded-md text-rose-600 dark:bg-slate-700/[.3] dark:text-slate-200\",\n            children: [\"All results for \\\"\", searchInputValue, \"\\\"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"No tasks found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s2(SearchField, \"qR88Qlx5iLYbPzCzvfC3sP3YPuY=\", false, function () {\n  return [useNavigate, useSearchQuery, useVisibility];\n});\n_c2 = SearchField;\nexport default SearchField;\nvar _c, _c2;\n$RefreshReg$(_c, \"ItemSearch\");\n$RefreshReg$(_c2, \"SearchField\");","map":{"version":3,"names":["React","useState","useEffect","useRef","createSearchParams","Link","useNavigate","ReactComponent","Search","useDate","useSearchQuery","useVisibility","jsxDEV","_jsxDEV","Fragment","_Fragment","ItemSearch","task","_s","dateFormated","date","className","children","to","id","title","fileName","_jsxFileName","lineNumber","columnNumber","_c","SearchField","_s2","navigate","searchResultsRef","searchInputValue","setSearchInputValue","matchedTasks","tasks","slice","elementIsVisible","listResultsVisible","showElement","showListResults","closeElement","closeListResults","current","navigateToSearchResults","pathname","search","q","toString","trim","length","autoComplete","htmlFor","type","placeholder","ref","onKeyUp","currentTarget","value","map","onClick","_c2","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/Дипломная/ToDo-app-main/src/components/TasksSection/SearchField.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { createSearchParams, Link, useNavigate } from \"react-router-dom\";\nimport { ReactComponent as Search } from \"../../assets/search.svg\";\nimport { Task } from \"../../interfaces\";\nimport useDate from \"../hooks/useDate\";\nimport useSearchQuery from \"../hooks/useSearchQuery\";\nimport useVisibility from \"../hooks/useVisibility\";\n\nconst ItemSearch: React.FC<{ task: Task }> = ({ task }) => {\n  const dateFormated = useDate(task.date);\n  return (\n    <li key={task.id} className=\"py-2\">\n      <Link\n        to={`/task/${task.id}`}\n        className=\"flex justify-between transition hover:text-rose-500 dark:hover:text-slate-200\"\n      >\n        <span>{task.title}</span>\n        <span>{dateFormated}</span>\n      </Link>\n    </li>\n  );\n};\n\nconst SearchField: React.FC = () => {\n  const navigate = useNavigate();\n\n  const searchResultsRef = useRef<HTMLInputElement>(null);\n  const [searchInputValue, setSearchInputValue] = useState<string>(\"\");\n\n  const matchedTasks = useSearchQuery(searchInputValue);\n\n  const tasks = matchedTasks.slice(0, 4);\n\n  const {\n    elementIsVisible: listResultsVisible,\n    showElement: showListResults,\n    closeElement: closeListResults,\n  } = useVisibility([searchResultsRef.current!], () => setSearchInputValue(\"\"));\n\n  const navigateToSearchResults = () => {\n    navigate({\n      pathname: \"results\",\n      search: createSearchParams({\n        q: searchInputValue,\n      }).toString(),\n    });\n  };\n\n  useEffect(() => {\n    if (searchInputValue.trim().length > 0) {\n      showListResults();\n    } else {\n      closeListResults();\n    }\n  }, [closeListResults, searchInputValue, showListResults]);\n\n  return (\n    <div className=\"flex-1 col-span-3 row-start-2 md:pr-10\">\n      <form className=\" relative md:max-w-xs w-full\" autoComplete=\"off\">\n        <label htmlFor=\"search\" className=\"sr-only\"></label>\n        <input\n          type=\"search\"\n          id=\"search\"\n          placeholder=\"Search task\"\n          ref={searchResultsRef}\n          onKeyUp={({ currentTarget }) => {\n            setSearchInputValue(currentTarget.value);\n          }}\n          className=\"inputStyles w-full\"\n        />\n        <Search className=\"absolute w-4 sm:w-5 right-4 top-3.5 text-slate-400\" />\n        {listResultsVisible && (\n          <div className=\"absolute bg-slate-100 rounded-md w-full top-14 p-3 dark:bg-slate-800 z-10\">\n            {tasks.length ? (\n              <>\n                <ul>\n                  {tasks.map((task) => (\n                    <ItemSearch key={task.id} task={task} />\n                  ))}\n                </ul>\n                <button\n                  onClick={navigateToSearchResults}\n                  className=\"bg-rose-100 w-full p-2 rounded-md text-rose-600 dark:bg-slate-700/[.3] dark:text-slate-200\"\n                >\n                  All results for \"{searchInputValue}\"\n                </button>\n              </>\n            ) : (\n              <span>No tasks found</span>\n            )}\n          </div>\n        )}\n      </form>\n    </div>\n  );\n};\n\nexport default SearchField;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}